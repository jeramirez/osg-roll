<chapter id="customizing" xreflabel="Customizing the OSG Roll">


<title>Customizing the OSG Roll -- Attributes </title>

<section id="customizing-osg" xreflabel="Customizing OSG">
<title>Customizing the OSG Roll </title>

<para>

This section describes the default OSG configuration and some simple
customizations that can be applied in Rocks with version &gt;= 5.4
</para>

<para>
By default, Hadoop, Condor and WorkerClient with glexec are installed on Rocks
<emphasis>compute</emphasis> appliances, while Gridftp and gatekeper server on <emphasis>login-0-0</emphasis> host 
and
Gridftp hadoop and bestman2 on <emphasis>login-0-1</emphasis> host. For Rocks 5.2 and newer, the OSG
roll makes use of <emphasis>attributes</emphasis>
to enable Hadoop, Condor and WorkerClient with glexec, Bestman2 server, Gridftp server, hdfs gridftp server, gatekeeper (CE) server to be installed on any appliance.
This may be particularly useful to groups who are including the Xen/KVM roll
and would like OSG servers to install on VM Container appliances. 
</para>

<para>
The basic customizations that can be applied without and scripting/programming
by setting global, appliance, or host attributes. Please see the
commands <computeroutput> rocks set attr help </computeroutput>
and
<computeroutput> rocks list attr help </computeroutput>

</para>

<para>

<table frame='all'><title>Attributes Used in OSG Roll</title>
<tgroup cols='2' align='left' colsep='1' rowsep='1'>
<thead>
<row>
  <entry align="center">Attibute Name</entry>
  <entry align="center">Description</entry>
</row>
</thead>
<tbody>

<row>
<entry>
OSG_GumsServer
</entry>
<entry>
Configure Gums server name used on any particular Appliance or Host installation.
Default: rocks-gums.&amp;Kickstart_PublicDNSDomain;
(rocks-gums.public.domain on a New Cluster Server install)
</entry>
</row>

<row>
<entry>
OSGGUMSPrivate
</entry>
<entry>
Configure which cluster node is the gums server node (private domain).
Default: login-0-2
</entry>
</row>

<row>
<entry>
OSG_CEServer
</entry>
<entry>
Configure Grid gatekeeper server name used on any particular Appliance or Host or gatekeeper installation.
Default: rocks-ce.&amp;Kickstart_PublicDNSDomain;
(rocks-ce.public.domain on a New Cluster Server install)
</entry>
</row>

<row>
<entry>
OSGCEPrivate
</entry>
<entry>
Configure which cluster node is the Grid gatekeeper server node (private domain).
Default: login-0-0
</entry>
</row>

<row>
<entry>
OSG_SEServer
</entry>
<entry>
Configure bestman server name used on any particular Appliance or Host or bestaman server installation.
Default: rocks-se.&amp;Kickstart_PublicDNSDomain;
(rocks-se.public.domain on a New Cluster Server install)
</entry>
</row>

<row>
<entry>
OSGSEPrivate
</entry>
<entry>
Configure which cluster node is the bestman server node (private domain).
Default: login-0-1
</entry>
</row>

<row>
<entry>
OSG_GFTPServer
</entry>
<entry>
Configure gridftp server name (non-hdfs) used on any particular Appliance or Host installation.
Default: rocks-ce.&amp;Kickstart_PublicDNSDomain;
</entry>
</row>


<row>
<entry>
OSG_HadoopNameNode
</entry>
<entry>
Configure Hadoop NodeName server name used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_NAMENODE=compute-0-0 in /etc/sysconfig/hadoop
Default: compute-0-0
</entry>
</row>

<row>
<entry>
OSG_HadoopSecondaryNode
</entry>
<entry>
Configure Hadoop SecondaryName server name used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_SECONDARY_NAMENODE=compute-0-1 in /etc/sysconfig/hadoop
Default: compute-0-1
</entry>
</row>

<row>
<entry>
OSG_HadoopDataDir
</entry>
<entry>
Configure Hadoop base data dir used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_DATADIR=/hadoop in /etc/sysconfig/hadoop
Default: /hadoop
</entry>
</row>

<row>
<entry>
OSG_HadoopData
</entry>
<entry>
Configure Hadoop data dir used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_DATA=/hadoop/data in /etc/sysconfig/hadoop
Default: /hadoop/data
</entry>
</row>

<row>
<entry>
OSG_HadoopCheckPointDirs
</entry>
<entry>
Configure Hadoop check point dirs used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_CHECKPOINT_DIRS=/home/hadoop,/scratch/hadoop in /etc/sysconfig/hadoop
Default: /home/hadoop,/scratch/hadoop
</entry>
</row>

<row>
<entry>
OSG_HadoopCheckPointPeriod
</entry>
<entry>
Configure Hadoop check point period used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_CHECKPOINT_PERIOD=600 in /etc/sysconfig/hadoop
Default: 600
</entry>
</row>

<row>
<entry>
OSG_HadoopUpdateFstab
</entry>
<entry>
Configure Hadoop for update fstab used on any particular Appliance or Host installation.
Check for a line like this: HADOOP_UPDATE_FSTAB=1 in /etc/sysconfig/hadoop
Default: 1
</entry>
</row>

<row>
<entry>
OSG_GlobusPortRange
</entry>
<entry>
Configure Globus Port Range used on any particular Appliance or Host installation.
This entry is used for setting iptable firewall on grid servers. 
Default: 20000:25000
</entry>
</row>

<row>
<entry>
OSG_GlobusTcpPortRange
</entry>
<entry>
Configure Globus TCP Port Range used on any particular Appliance or Host installation.
This entry is used for setting GLOBUS_TCP_PORT_RANGE on grid servers. (note change : by , compared with OSG_GlobusPortRange)
Default: 20000,25000
</entry>
</row>

<row>
<entry>
OSG_GlobusTcpSourceRange
</entry>
<entry>
Configure Globus TCP Source Range used on any particular Appliance or Host installation.
This entry is used for setting GLOBUS_TCP_SOURCE_RANGE on grid servers. (note change : by , compared with OSG_GlobusPortRange)
Default: 20000,25000
</entry>
</row>

<row>
<entry>
OSG_SRMlocalPathListAllowed
</entry>
<entry>
Configure localPathListAllowed used on any particular Appliance or Host installation of bestman server.
Check for a line like this: localPathListAllowed=/mnt/hadoop;/data/se in /etc/bestman2/conf/bestman2.rc
Default: /mnt/hadoop;/data/se
</entry>
</row>

<row>
<entry>
OSG_SRMsupportedProtocolList
</entry>
<entry>
Set supportedProtocolList used on any particular Appliance or Host installation of bestman server. This is the default gridftp server.
Check for a line like this: gsiftp://rocks-ce.&amp;Kickstart_PublicDNSDomain;:2811 in /etc/bestman2/conf/bestman2.rc
Default: gsiftp://rocks-ce.&amp;Kickstart_PublicDNSDomain;:2811
</entry>
</row>

<row>
<entry>
OSG_Client
</entry>
<entry>
Enable/Disable OSG worker node Client Installation on any particular Appliance or Host. Install includes glexec.
Default: true (on compute appliance)
</entry>
</row>

<row>
<entry>
OSG_CE
</entry>
<entry>
Enable/Disable osg-ce-condor (="condor") or osg-ce-sge (="sge") Installation on any particular Appliance or Host.
Default: condor (on login-0-0)
</entry>
</row>

<row>
<entry>
OSG_SE
</entry>
<entry>
Enable/Disable bestman-server Installation on any particular Appliance or Host.
Default: true (on login-0-1)
</entry>
</row>

<row>
<entry>
OSG_GRIDFTP
</entry>
<entry>
Enable/Disable standalone gridftp server Installation on any particular Appliance or Host.
Default: true (on login-0-0)
</entry>
</row>

<row>
<entry>
OSG_GFTP_HDFS
</entry>
<entry>
Enable/Disable hadoop gridftp server Installation on any particular Appliance or Host.
Default: true (on login-0-1)
</entry>
</row>

<row>
<entry>
OSG_StoredCertsDir
</entry>
<entry>
Set Base Dir where grid certs are stored for Appliance or Host installation.
During installation of CE or SE hostcert.pem and hostkey.pem are copied to /root. 
Default: /root/certs
</entry>
</row>

<row>
<entry>
OSG_Condor_Client
</entry>
<entry>
Enable/Disable Condor Client Installation on any particular Appliance or Host.
Default: true (on compute appliance)
</entry>
</row>

<row>
<entry>
OSG_Condor_Master
</entry>
<entry>
Redefine the Condor Master that nodes use. Default: public frontend name
</entry>
</row>

<row>
<entry>
OSG_Condor_Network 
</entry>
<entry>
Define which network interface is used for Condor traffic. Default: frontends are set to public, clients are set to private.
</entry>
</row>

<row>
<entry>
OSG_Condor_Daemons
</entry>
<entry>
Define which Condor execution daemons are installed. Default: 
[MASTER (global)], 
[MASTER, SCHEDD, COLLECTOR, NEGOTIATOR (frontends)],  
[MASTER, SCHEDD (login appliance)],
[MASTER, STARTD (compute appliance)]
</entry>
</row>

<row>
<entry>
OSG_Condor_PortLow 
</entry>
<entry>
Lower Port range that Condor will use to communicate among 
daemons. Removal of this Attribute will result in removal of the LOWPORT entry in 01_rocks_condor_config.local after syncing the configuration. Default: 40000
</entry>
</row>

<row>
<entry>
OSG_Condor_PortHigh 
</entry>
<entry>
Upper Port range that Condor will use to communicate among 
daemons. Removal of this Attribute will result in removal of the HIGHPORT entry in 01_rocks_condor_config.local after syncing the configuration. Default: 50000
</entry>
</row>

<row>
<entry>
OSG_Condor_HostAllow
</entry>
<entry>
Comma separates list of allowed readers/writers for Condor. Translates to 
HOSTALLOW directive in Condor Configuration file. Default: + rocks-ce
</entry>
</row>


<row>
<entry>OSG_Condor_PasswordAuth </entry>
<entry>
 Use a shared pool password, instead of host-based 
authentication. Default: no. 
</entry>
</row>

<row>
<entry>
OSG_Condor_EnableMPI 
</entry>
<entry>
Configure a local scheduler for MPI Universe Support. Default: no
</entry>
</row>

<row>
<entry>
OSG_Condor_EnableAMAZON_EC2 
</entry>
<entry>
Configure a local scheduler for AMAZON_EC2 Support. Default: no
</entry>
</row>

<row>
<entry>
OSG_Condor_EnableT3GRID_SUBMIT
</entry>
<entry>
Configure a local grid submitter for interactive nodes (I use to called it CRAB submit). Default: no
</entry>
</row>

<row>
<entry>
OSG_Condor_EnableT3GRID_CMSSW
</entry>
<entry>
Configure a local compute nodes for CMS jobs. Default: yes
</entry>
</row>

<row>
<entry>
OSG_GUMSBackupDir
</entry>
<entry>
Configure the directory in which is located the backup config files and database for gums. Default: /path/to/gums/backup
</entry>
</row>

<row>
<entry>
OSG_GUMSDNADMIN
</entry>
<entry>
Configure the admin DN for gums used in the configuration scripts. Default: /DC=org/DC=doegrids/OU=People/CN=Name M LastName 123456
</entry>
</row>


<row>
<entry>
OSG_condoruid
</entry>
<entry>
Configure uid for condor user. Default: 407
</entry>
</row>

<row>
<entry>
OSG_condorgid
</entry>
<entry>
Configure gid for condor user (group). Default: 407
</entry>
</row>

<row>
<entry>
OSG_squiduid
</entry>
<entry>
Configure uid for squid user. Default: 450
</entry>
</row>

<row>
<entry>
OSG_squidgid
</entry>
<entry>
Configure gid for squid user (group). Default: 450
</entry>
</row>

<row>
<entry>
OSG_cvmfsuid
</entry>
<entry>
Configure uid for cvmfs user. Default: 470
</entry>
</row>

<row>
<entry>
OSG_cvmfsgid
</entry>
<entry>
Configure gid for cvmfs user (group). Default: 470
</entry>
</row>

<row>
<entry>
OSG_fusegid
</entry>
<entry>
Configure gid for fuse group. Default: 408
</entry>
</row>

<row>
<entry>
OSG_CVMFS_REPOSITORIES
</entry>
<entry>
Configure CVMFS_REPOSITORIES for cvmfs. Default: cms.cern.ch
</entry>
</row>

<row>
<entry>
OSG_CVMFS_CACHE_BASE
</entry>
<entry>
Configure CVMFS_CACHE_BASE for cvmfs. Default: "/var/cache/cvmfs"
</entry>
</row>

<row>
<entry>
OSG_CVMFS_QUOTA_LIMIT
</entry>
<entry>
Configure CVMFS_QUOTA_LIMIT for cvmfs (in MB). Default: 10000
</entry>
</row>

<row>
<entry>
OSG_CVMFS_HTTP_PROXY
</entry>
<entry>
Configure CVMFS_HTTP_PROXY for cvmfs. Default: "http://login-0-2:3128"
</entry>
</row>

<row>
<entry>
OSG_CMS_LOCAL_SITE
</entry>
<entry>
Configure CMS_LOCAL_SITE for cvmfs. Default: "T3_US_PuertoRico"
</entry>
</row>



</tbody>
</tgroup>
</table>

</para>

</section>
</chapter>

